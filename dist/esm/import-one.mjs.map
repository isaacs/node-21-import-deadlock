{"version":3,"file":"import-one.mjs","sourceRoot":"","sources":["../../src/import-one.mts"],"names":[],"mappings":"AAAA,OAAO,EAAE,QAAQ,EAAE,MAAM,aAAa,CAAA;AACtC,OAAO,EAAE,cAAc,EAAE,MAAM,qBAAqB,CAAA;AACpD,OAAO,EAAE,YAAY,EAAE,MAAM,qBAAqB,CAAA;AAElD,MAAM,EAAE,KAAK,EAAE,KAAK,EAAE,GAAG,IAAI,cAAc,EAAE,CAAA;AAC7C,KAAK,CAAC,EAAE,CAAC,SAAS,EAAE,GAAG,CAAC,EAAE;IACxB,OAAO,CAAC,KAAK,CAAC,oBAAoB,EAAE,GAAG,CAAC,CAAA;IACxC,MAAM,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,MAAM,EAAE,GAAG,IAAI,CAAC,CAAA;IAC1C,UAAU,CAAC,GAAG,EAAE,CAAC,KAAK,CAAC,WAAW,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC,CAAA;AAC7C,CAAC,CAAC,CAAA;AAEF,KAAK,CAAC,KAAK,EAAE,CAAA;AACb,KAAK,CAAC,KAAK,EAAE,CAAA;AAEb,YAAY,CAAC,8BAA8B,CAAC,CAAA;AAC5C,QAAQ,CAAC,MAAM,CAAC,IAAI,GAAG,CAAC,kBAAkB,EAAE,MAAM,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE;IAC7D,SAAS,EAAE,MAAM,CAAC,IAAI,CAAC,GAAG;IAC1B,IAAI,EAAE,EAAE,IAAI,EAAE,KAAK,EAAE;IACrB,YAAY,EAAE,CAAC,KAAK,CAAC;CACtB,CAAC,CAAA;AACF,YAAY,CAAC,6BAA6B,CAAC,CAAA","sourcesContent":["import { register } from 'node:module'\nimport { MessageChannel } from 'node:worker_threads'\nimport { consoleError } from './console-error.mjs'\n\nconst { port1, port2 } = new MessageChannel()\nport1.on('message', msg => {\n  console.error('main 2 got message', msg)\n  const t = Math.floor(Math.random() * 1000)\n  setTimeout(() => port1.postMessage(msg), t)\n})\n\nport1.unref()\nport2.unref()\n\nconsoleError('register loader-one : before')\nregister(String(new URL('./loader-one.mjs', import.meta.url)), {\n  parentURL: import.meta.url,\n  data: { port: port2 },\n  transferList: [port2],\n})\nconsoleError('register loader-one : after')\n"]}